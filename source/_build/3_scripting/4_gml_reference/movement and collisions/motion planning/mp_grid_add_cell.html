<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>mp_grid_add_cell</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../../../../../files/helpindex.css"
type="text/css">
<link rel="stylesheet" href="../../../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/4_gml_reference/movement and collisions/motion planning/mp_grid_add_cell.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fmovement%20and%20collisions%2Fmotion%20planning%2Fmp_grid_add_cell.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fmovement%20and%20collisions%2Fmotion%20planning%2Fmp_grid_add_cell.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->

<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>mp_grid_add_cell</h2>

<div class="body-scroll">
<h3 class="studio">Syntax:</h3>

<p class="code">mp_grid_add_cell(id, h, v);</p>

<p><br>
</p>

<div class="param">
<table>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>

<tr>
<td>id</td>
<td>Index of the mp_grid that is to be used</td>
</tr>

<tr class="alt">
<td>h</td>
<td>Horizontal position of the cell in the grid</td>
</tr>

<tr>
<td>v</td>
<td>Vertical position of the cell in the grid</td>
</tr>
</table>
</div>

<p><br>
</p>

<p><b>Returns:</b> N/A</p>

<p><br>
</p>

<h3 class="studio">Description</h3>

<p>With this function we can mark individual cells within the
mp_grid as being "forbidden" meaning that the path finding
functions will not ever cross them. Now, normally you work in x/y
<i>room</i> coordinates, and not in mp_grid <i>cell</i>
coordinates. So let's consider the following image which shows how
the two can correlate:<br>
<br>
<img class="center" src="images/mp_grid_add_cell_image.png"></p>

<p>As you can see the mp_grid is numbered as a series of cells
(starting at 0,0 in the upper left corner), and when you place this
grid over the room there is a direct correlation between the room
coordinates (which also start at 0,0 in the top left) and the cells
within the grid. In the image you can see that an instance at the
position 260,130 falls on the grid cell 8,4. You can calculate
mathematically the exact cell that a position lands on easily by
either dividing the number by the grid resolution and then rounding
down <i>or</i> (if you are using power of 2 grid resolutions like
8, 16, 32 etc...) you can use the bitwise operators. It should be
noted that the bitwise operation is faster. The example below shows
both methods.<br>
<br></p>

<p><br>
</p>

<h3 class="studio">Example:</h3>

<p class="code">with (obj_Wall)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;mp_grid_add_cell(grid, floor(x / 32), floor(y /
32));<br>
&nbsp;&nbsp;&nbsp;}<br>
with (obj_Door)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;mp_grid_add_cell(grid, x&gt;&gt;5,
y&gt;&gt;5);<br>
&nbsp;&nbsp;&nbsp;}<br></p>

<p>The above code will make all "obj_Wall" and all obj_Door add
their equivalent cell positions into the mp_grid indexed in the
variable "grid". In the first part of the example, this is done by
taking the x/y coordinates of the object and dividing them by the
resolution of the grid (using <tt>floor</tt> to keep the values as
integers), and in the second part (since the grid resolution is a
power of 2) it is done by bit-shifting the x,y coordinates 5 places
to the right.</p>

<p><br>
</p>
</div>

<div class="footer">
<div class="buttons">
<div class="clear">
<div style="float:left">Back: <a href="index.html">Motion
Planning</a></div>

<div style="float:right">Next: <a href=
"mp_grid_add_instances.html">mp_grid_add_instances</a></div>
</div>
</div>

<h5>Â© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
