<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../..";
    gCommonRootRelPath = "../../..";
    gTopicId = "9.2.7.0_3";
  
//]]></script>

  <script type="text/javascript" src="../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"/>
  <link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"/>
  <meta name="topic-status" content="Draft"/>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>If Collision Shape</title>
  <meta name="generator" content="Adobe RoboHelp 2019"/>
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"/>
  <meta name="rh-authors" content="Mark Alexander"/>
  <meta name="topic-comment" content="Page that explains the If Collision Shape action"/>
  <meta name="rh-index-keywords" content="DnD™ Action - If Collision Shape"/>
  <meta name="search-keywords" content="If Collision Shape"/>
</head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header" onclick="rh._.goToFullLayout()">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="If Collision Shape">
        <span>If Collision Shape</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <span>Click here to see this page in full context</span>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><img alt="If Collision Shape Icon" class="icon" height="32" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/i_Collision_Shape.png" width="32"/> If Collision Shape</h1>
  <p>This action is used to check and see if there is a collision with an instance of a given object within a given shaped area or along a line. You give the shape (rectangle, ellipse or line), the object to check for, and then supply the coordinates for
    the upper-left and lower-right corners of the shape being used, or in the case of a line, the start and end positions. These can be absolute positions within the game room, or positions relative to the instance performing the action. You can see how
    this works in the image below:</p>
  <p><img alt="Example of different collision shapes" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/collision_shape_example.png"/>As you can see, the results will depend on the collision mask of the instance
    being checked for, meaning the instance of the object you are looking for <i>must</i> have a sprite assigned to the <tt>sprite_index</tt>, or a sprite assigned to the <tt>mask_index</tt>. If it does not then it will not be detected by these functions,
    regardless of whether it is drawing a sprite or not. It is worth noting that any instance that falls completely within the boundaries set for the ellipse or rectangle shape will also return a collision. The action will evaluate to <tt>true</tt> if
    a collision is detected, or <tt>false</tt> otherwise, although you can also check the <b>Not</b> flag to check if there is <i>not</i> a collision with the given shaped area, and the action will then only evaluate as <tt>true</tt> if <i>no</i> collisions
    are found, otherwise it will evaluate as <tt>false</tt>. You can also set the <b>Exclude Self</b> option to exclude the calling instance from the collision check.</p>
  <p>Next you can check/uncheck the option to <b>Return List</b>. Checking this means the action will create and populate a <a href="../Data_Structures/Data_Structure_Actions.htm">list</a><span> </span>data structure with <i>all</i>instances in collision
    with the shape and set the <b>Target</b> variable to the DS list ID. When unchecked, it will only set the <b>Target</b> variable to a value less than 0 when no collision is detected, or the unique ID value of <i>one</i> of the instances in the collision
    (note that if multiple instances are in collision then you have no way of knowing which instance ID will be returned when not using a list).</p>
  <p>If you have selected to return a list - and the Target variable is <i>not</i> set to <b>Temp</b> - then you can also select the <b>Free Target</b> option. When set to <tt>true</tt>, then the list contained in the target variable will be destroyed and
    a new list created (and returned to the target variable) each time you call the action. In this way you can re-use the same variable without worrying about memory leaks, as, if you do <i>not</i> check <b>Free Target</b> option, you become responsible
    for destroying the list before using the variable again in the action. Note that <i>regardless</i> of whether this option is checked or not, if you have set the action to <b>Return List</b>, then the target variable will <i>always contain a list ID</i>,
    and as such, this will need to be freed when the instance is destroyed or the room ends (you can use the <a href="../../../The_Asset_Editors/Object_Properties/Object_Events.htm"><b>Clean Up</b></a> event for this, for example, along with the <a href="../Data_Structures/Free_Data_Structure.htm">Free Data Structure</a><span> </span>action).
    It is worth noting that you can set the <b>Free Target</b> option to use a pre-defined variable or an expression and so control when the list data structure is freed by setting the variable elsewhere (or having different outcomes for the expression)
    as long as it evaluates to <tt>true</tt>/<tt>false</tt>.</p>
  <p>Finally, you supply the <b>Target</b> variable that you want to hold the returned value or list ID. If you flag the Target variable to hold the returned value as being a <b>Temp</b> (local) variable, then the action will create this variable to hold
    the return value <i>only</i> until the end of the event, in this case the Free Target option does nothing and you will be responsible for destroying the DS list if that option has been checked. If no target variable is supplied and the <b>Return List</b>    option is checked, no list will be created.</p>
  <p class="note"><b>IMPORTANT!</b> Collisions will only register for those instances that have a valid collision mask, ie: they have a sprite assigned to the <tt>sprite_index</tt>, or a sprite assigned to the <tt>mask_index</tt>. If the instances of the object being
    checked for in this action have no collision mask then the collision will not be detected, regardless of what the instance is drawing at the time.</p>
  <p>Note that to add actions into an &quot;<span class="inline">if</span>&quot; block, they should be dropped to the <i>side</i> of the action, as shown in the image below:</p>
  <p><img alt="If Collision Shape drop actions" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/If_Collision_Shape.png"/></p>
  <p> </p>
  <h4>Action Syntax:</h4>
  <p><img alt="If Collision Shape Action" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/a_Collision_Shape.png"/></p>
  <h4>Arguments:</h4>
  <table>
    <tbody>
      <tr>
        <th>Argument</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>Shape</td>
        <td>The shape to use</td>
      </tr>
      <tr>
        <td>Object</td>
        <td>The object to check for instances of</td>
      </tr>
      <tr>
        <td>x1</td>
        <td>The x position to start from</td>
      </tr>
      <tr>
        <td>y1</td>
        <td>The y position to start from</td>
      </tr>
      <tr>
        <td>x2</td>
        <td>The x position to end at</td>
      </tr>
      <tr>
        <td>y2</td>
        <td>The y position to end at</td>
      </tr>
      <tr>
        <td>Free Target</td>
        <td>Can be set to a variable or expression, or set to <tt>true</tt>/<tt>false</tt> to control freeing of the list memory when re-using a list variable</td>
      </tr>
      <tr>
        <td>Target</td>
        <td>The variable to target for the return value of the action</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>Example:</h4>
  <p><img alt="If Collision Shape Example" class="center" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Collisions/e_Collision_Shape.png"/>The above action block code checks for a collision with any instances of the object &quot;
    <span class="inline">obj_Enemy</span>&quot; within a 100px circle around the calling instances position. The action generates a list of all instances found to be in collision and stores the list ID in the Target variable. If the action evaluates to
    <tt>true</tt> then the list is looped through and each instance with its ID stored in the list has its &quot;<span class="inline">hp</span>&quot; variable reduced by 1. The DS list is then freed.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="Collision_Actions.htm">Collision Actions</a></div>
        <div style="float:right">Next: <a href="If_Collision_Point.htm">If Collision Point</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2021 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Action - If Collision Shape
-->
  <!-- TAGS
action_if_collision_shape
-->

</body></html>