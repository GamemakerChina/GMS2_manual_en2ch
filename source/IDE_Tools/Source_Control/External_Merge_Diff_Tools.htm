<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>External Merge/Diff Tools</title>
  <meta name="generator" content="Adobe RoboHelp 2019" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section that covers Source Control merge and diff tools" />
  <meta name="rh-index-keywords" content="Source Control - Esternal Merge/Dif Tools" />
  <meta name="search-keywords" content="merge,diff,external tools" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>External Merge/Diff Tools</h1>
  <p>When you work on a project with other people, there&#39;s always a chance there could be a conflict, as multiple people edit the same file and most source control systems can make a good attempt at merging any conflicted files, but when there are changes
    in the same place, it requires a bit of help to know what to do – this is where a <strong>merge tool </strong>comes in to show you the changes, and let you decide.</p>
  <p>As each merge tool is different, there are four macros that can be used to help specify files to it which can be set up from the <strong>Conflicts </strong>window by clicking the button labelled <strong>Choose Merge Tool</strong><strong></strong>:</p>
  <p><img alt="Source Control Conflict Window" class="center" src="../../assets/Images/IDE Tools/SCM_ConflictsWindow.png" /></p>
  <p>When you click that button the <a href="../../Setting_Up_And_Version_Information/IDE_Preferences/Plugin_Preferences.htm">Preferences</a> window will open on the Git plugin:</p>
  <p><img alt="Source Control Choose Merge Tool" class="center" src="../../assets/Images/IDE Tools/SCM_ChooseMergeTool.png" />Here you provide a path to the chosen merge tool and then a <strong>Merge Tool Options</strong> macro (or macros) to use when deciding
    what to do, with the following options available:</p>
  <ul class="colour">
    <li><span class="inline">${scm_mine}</span>: path to your version</li>
    <li><span class="inline">${scm_thers}</span>: path to their version</li>
    <li><span class="inline">${scm_base}</span>: path to the version before the conflicted changes occurred</li>
    <li><span class="inline">${scm_merged}</span>: path to where the merge tool should save to</li>
  </ul>
  <p>As a help to setting up, when you give a path to certain merge tools, GameMaker Studio 2 will fill in some defaults to get started with, depending on the tool chosen:</p>
  <ul class="colour">
    <li><strong>KDiff3</strong>: <span class="inline">${scm_theirs} ${scm_mine} -o ${scm_merged}</span></li>
    <li><strong>Meld</strong>: <span class="inline">${scm_mine} ${scm_merged} ${scm_theirs}</span></li>
    <li><strong>Notepadd++</strong>: <span class="inline">${scm_merged}</span></li>
    <li><strong>TortoiseMerge</strong>: <span class="inline">/base:${scm_base} /theirs:${scm_theirs} /mine:${scm_mine} /merged:${scm_merged}</span></li>
  </ul>
  <p>Note that if you don&#39;t have (or don&#39;t want to use) a merge tool, then you can open up the script in the IDE and attempt to fix it from there.</p>
  <p>So, back to our example Conflict as stated in the section on <a href="Conflicts.htm">Conflicts</a>... We have done a pull from master and one of the files is conflicted. This opens the Source Control <strong>Conflicts </strong>window, where you can
    click on the conflicted script, and now click on <strong>Merge</strong>, since you have configured your merge tool. Clicking merge will now open the tool where you can deal with the conflict and then use the macro(s) supplied to make the required
    changes. Once you have finished and closed the merge tool, the GameMaker Studio 2 IDE will show the following confirmation window:</p>
  <p><img alt="Source Control Merge Confirm" class="center" src="../../assets/Images/IDE Tools/SCM_MergeConfirm.png" />Simply answer &quot;Yes&quot; to this prompt as you&#39;ve just done it yourself using the merge tool, and then you need to commit this
    change to signify the end of the merge operation (<strong>Source Control </strong>&gt; <strong>Commit Changes</strong>). The Commit window will now show that a merge is in progress as well as show some unstaged files:</p>
  <p><img alt="Source Control Merge In Progress" class="center" src="../../assets/Images/IDE Tools/SCM_MergeInProgress.png" />These unstaged files are our script file with the addition of <span class="inline">.base</span>, <span class="inline">.ours</span>    and <span class="inline">.theirs</span>. We can safely delete all these so click <img alt="LMB Icon" class="icon" height="22" src="../../assets/Images/Icons/Icon_LMB.png" style="cursor: nwse-resize;" width="20" /> on the top one and then <img alt="Shift Icon"
      class="icon" height="20" src="../../assets/Images/Icons/Icon_Shift.png" width="55" /> + <img alt="LMB Icon" class="icon" height="22" src="../../assets/Images/Icons/Icon_LMB.png" style="cursor: nwse-resize;" width="20" /> on the bottom one to select
    them all. Next, we right click on the selected files and choose <strong>Delete Path</strong> to remove them. There&#39;s also a commit message pre-filled for us as well, stating that this was a merge, and that there was a conflict (we can add to this
    or edit it as we wish).</p>
  <p>We can click <strong>Commit </strong>now.</p>
  <p>Due to the fact that you can have issues with other files, it means that your workflow when using remote or shared repositories should be as follows:</p>
  <p class="code">Make Changes &gt; Save &gt; Commit &gt; Pull &gt; Merge &gt; Push</p>
  <p>You should also set up a <strong>Diff Tool</strong> for use when doing commits to a repository. This is setup from the <a href="../../Setting_Up_And_Version_Information/IDE_Preferences/Plugin_Preferences.htm">Preferences</a>, same as for the Merge tool:</p>
  <p><img alt="Source Control Choose Diff Tool" class="center" src="../../assets/Images/IDE Tools/SCM_ChooseDiffTool.png" />The Diff tool is configured in much the same manner as the Merge tool, but only uses the <span class="inline">${scm_base}</span> and
    <span class="inline">${scm_theirs}</span> options - in this case, <span class="inline">${scm_base}</span> represents the unmodified file whereas <span class="inline">${scm_theirs}</span> represents the current state of the file. The Tool Options should
    be pre-populated with the default options for <strong>Meld</strong>, <strong>KDiff3 </strong>and <strong>TortoiseMerge</strong>, just as they were for the Merge tool. Note that GameMaker Studio 2 does <em>not </em>support the outputting of single
    file diff patches, therefore there is no default for <strong>Notepad++</strong>.</p>
  <p>In order to view changes between current and previous revisions using the Diff tool, simply open up the Commit window and then double click on a file. If the tool has been setup correctly, it will be launched and you&#39;ll be able to see the changes
    between the files.</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="../Source_Control.htm">Source Control</a></div>
        <div style="float:right">Next: <a href="Setting_Up_Git_Plugin.htm">Setting Up The GIT Plugin</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2021 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Source Control External Tools
Source Control Diff
Source Control Merge
Merge
Diff
-->
  <!-- TAGS
source_control_tools
-->
</body>
</html>