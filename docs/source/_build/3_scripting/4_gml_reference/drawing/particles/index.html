<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, c" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>粒子</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../../../../../files/helpindex.css"
type="text/css">
<link rel="stylesheet" href="../../../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/4_gml_reference/drawing/particles/index.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fdrawing%2Fparticles%2Findex.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fdrawing%2Fparticles%2Findex.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script><!-- !chm2web! -->


<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>粒子</h2>

<p>For complex things in <i>GameMaker Studio 2</i> you would
normally have an <a href="../../objects/index.html">object</a> and
create <a href="../../instances/index.html">instances</a> of that
object around the room. However, for graphics effects, this can be
expensive as every instance comes with a "cost" in processing due
to the variables it contains and the codes it has in the different
events. You can reduce this cost by turning to <a href=
"../../../../2_interface/1_editors/rooms.html">tilemap layers</a>
and <a href="../../../../2_interface/1_editors/rooms.html">asset
layers</a> for drawing your graphics needs but those are generally
static and cannot be changed or moved around much. However, there
is one other option for drawing fast yet versatile graphics effects
in your games, and that is to use <i>particles</i>.</p>

<p>Particles are graphic resources that have certain properties
which are defined within a <i>particle system</i>. These properties
cannot be manipulated directly for individual particles, but are
changed through the code that is used to define the individual
particle and the system that it belongs to. They are very useful
for creating beautiful and flashy effects (or subtle and discreet
ones!) like explosions, decals, rain, snow, star fields and debris
in a game without the CPU overhead that using instances has.</p>

<p>The basic setup for a particle system follows three steps, with
the third step being optional depending on how you wish to create
your particle effects within the room:</p>

<blockquote>
<ul>
<li><b>Create a particle system</b>: The particle system is like a
container that we will use to hold our different particle types
ready for use. We use code to define a series of visual aspects and
behaviours for our particles, and then we place them in the
"container" so that we can take them out and use them whenever and
wherever we need later.</li>

<li style="list-style: none"><br>
</li>

<li><b>Create particle types</b>: Particle types are the graphic
effect itself. You can have many different types, each with their
own range of colours, alphas, sizes and movements, but its
important to note that you <i>do not have control over individual
particles</i>. You define a series of parameters and the particle
will be created to have a random spread of behaviours chosen from
them.</li>

<li style="list-style: none"><br>
</li>

<li><b>Create emitters</b>: Emitters are an option that can be used
to burst or stream particles from within very clearly defined
limits. They are optional because you can create particles from any
instance using the <a href=
"particle%20systems/part_particles_create.html"><tt>part_particles_create</tt></a>
and <a href=
"particle%20systems/part_particles_create_colour.html"><tt>part_particles_create_colour</tt></a>
functions but they are not always adequate for every
situation.</li>
</ul>
</blockquote>

<p>Although particles are an excellent tool for creating effects,
they do come with certain restrictions and good practices which
need to be followed unless you want your game to grind to halt and
eventually crash:</p>

<blockquote>
<ul>
<li>Particle systems, particles and emitters take up memory and as
such you should be very careful how you use them as it is very easy
to cause a memory leak which will slow down and eventually crash
your game. One way to cope with this is to have a <i>global</i>
system with everything defined at the start of the game and removed
at the end, but if you want a dynamic system then each particle and
emitter (and the system itself) should be destroyed the moment it
is not needed.</li>

<li style="list-style: none"><br>
</li>

<li>Particles may be fast and light on the CPU, but they still
require <i>some</i> processing and so you shouldn't have 40,000 of
them bursting across the screen at a time. Limit them to those that
are necessary to achieve a specific effect and no more.</li>

<li style="list-style: none"><br>
</li>

<li>If you define your own particle sprite instead of using one of
the 14 included sprites, you should try to keep them as small as
possible to achieve the effect you require.</li>

<li style="list-style: none"><br>
</li>

<li>Particles do <i>not</i> interact with anything. Should you need
them to have any type of interaction with the user or any other
instances in your game, you should be looking at using instances
instead as particles are purely graphic.</li>

<li style="list-style: none"><br>
</li>

<li>Even though there is no technical limit to the amount of
systems, emitters and particles you can create in one game, you
should try and limit everything to the minimum number possible to
keep memory use as low as possible.</li>

<li style="list-style: none"><br>
</li>

<li>On mobile devices, take care with particles as <i>drawing</i>
them can be slow if they cover a large area of the screen
(over-draw on mobile devices is one of the main causes of
slowdown).</li>

<li style="list-style: none"><br>
</li>

<li>With HTML5 there is no additive blending, and unless you have
WebGL enabled, you cannot have colour blending either.</li>

<li style="list-style: none"><br>
</li>
</ul>
</blockquote>

<p>The following sections cover all aspects of coding your own
particle systems:</p>

<blockquote><a name="particles_simple" id="particles_simple"></a>
<label class="collapse" for="one">Simple Particle Effects</label>
<input id="one" type="checkbox">
<div class="index_list">
<p>The easiest way of creating particles in your game with
<i>GameMaker Studio 2</i> is to use the in-built effects mechanism.
There effects are created using an internal particle system which
is basically a very fast method for drawing graphical effects only
and as such you do not have to worry about all the details (like
memory management) when using these functions. You simply specify
the type of effect, the position where it must be created, the size
you want it to be and finally, its colour then let <i>GameMaker
Studio 2</i> do all the work.</p>

<p>The following functions exists for creating the built in
particle effects:</p>

<blockquote>
<ul>
<li><a href=
"simple%20effects/effect_create_below.html">effect_create_below<br></a>
</li>

<li><a href=
"simple%20effects/effect_create_above.html">effect_create_above<br></a>
</li>

<li><a href=
"simple%20effects/effect_clear.html">effect_clear<br></a>
</li>
</ul>
</blockquote>

<p>There are also a number of different constants for each of the
pre-defined effects that the above functions can use:</p>

<blockquote>
<ul>
<li><a href="simple%20effects/ef_cloud.html">ef_cloud<br></a>
</li>

<li><a href="simple%20effects/ef_ellipse.html">ef_ellipse<br></a>
</li>

<li><a href=
"simple%20effects/ef_explosion.html">ef_explosion<br></a>
</li>

<li><a href="simple%20effects/ef_firework.html">ef_firework<br></a>
</li>

<li><a href="simple%20effects/ef_flare.html">ef_flare<br></a>
</li>

<li><a href="simple%20effects/ef_rain.html">ef_rain<br></a>
</li>

<li><a href="simple%20effects/ef_ring.html">ef_ring<br></a>
</li>

<li><a href="simple%20effects/ef_smoke.html">ef_smoke<br></a>
</li>

<li><a href="simple%20effects/ef_smokeup.html">ef_smokeup<br></a>
</li>

<li><a href="simple%20effects/ef_snow.html">ef_snow<br></a>
</li>

<li><a href="simple%20effects/ef_spark.html">ef_spark<br></a>
</li>

<li><a href="simple%20effects/ef_star.html">ef_star<br></a>
</li>
</ul>
</blockquote>

<p>Even though these effects are limited in scope and
customisation, they can still be used to create some simple, great
effects with very little effort. For example by creating a small
puff of grey smoke below a moving missile in each step, a pretty
convincing smoke trail is created, so even when you are an expert
in particles it pays to remember that these effects exists as they
can still save you some time.</p>
</div>
<br>
<a name="particle_systems" id="particle_systems"></a> <label class=
"collapse" for="two">Particle Systems</label> <input id="two" type=
"checkbox">
<div class="index_list">
<p>Before you can create particles you need to create a particle
system. This is a "container" where you place your particles and
emitters (if you need them) ready for use, and you can put as many
or as few particles into any one system as you think necessary, and
you can have as many systems as you think necessary too. However,
it is always better to keep this number as small as possible due to
the fact that each system, emitter and particle takes up memory and
having too many of them may slow your game down or cause problems.
For example, if you need some effects to appear above instances,
and other effects to appear beneath instances, you would create two
systems and set their depths to get the desired effect, with all
particles that are added to each system being drawn at the depth
you specify.</p>

<blockquote><label class="collapse" for="five">System
Functions</label> <input id="five" type="checkbox">
<div class="index_list">
<p>Since a particle system is a dynamically created resource, you
must create it and store the returned index in a variable to
reference the system in all further function calls, and it is very
important that you also destroy the system when it is no longer
needed or else you will have a memory leak that will slow down and
eventually crash your game. It is also worth noting that particle
systems will live on forever after they are created, even if the
index is no longer stored. So even if you change room or restart
the game, the systems and the particles will remain, and be
visible, in all further rooms so you better make sure you destroy
them once you no longer need them.</p>

<p>The basic functions for setting up a particle system are listed
below:</p>

<ul>
<li><a href=
"particle%20systems/part_system_exists.html">part_system_exists<br></a>
</li>

<li><a href=
"particle%20systems/part_system_create.html">part_system_create<br></a>
</li>

<li><a href=
"particle%20systems/part_system_create_layer.html">part_system_create_layer<br>
</a>
</li>

<li><a href=
"particle%20systems/part_system_get_layer.html">part_system_get_layer<br>
</a>
</li>

<li><a href=
"particle%20systems/part_system_layer.html">part_system_layer<br></a>
</li>

<li><a href=
"particle%20systems/part_system_clear.html">part_system_clear<br></a>
</li>

<li><a href=
"particle%20systems/part_system_depth.html">part_system_depth<br></a>
</li>

<li><a href=
"particle%20systems/part_system_position.html">part_system_position<br>
</a>
</li>

<li><a href=
"particle%20systems/part_system_destroy.html">part_system_destroy<br>
</a>
</li>

<li><a href=
"particle%20systems/part_particles_clear.html">part_particles_clear<br>
</a>
</li>

<li><a href=
"particle%20systems/part_particles_count.html">part_particles_count<br>
</a>
</li>
</ul>
</div>
<br>
<label class="collapse" for="six">System Drawing</label> <input id=
"six" type="checkbox">
<div class="index_list">
<p>Once particles are added to a particle system and then burst or
streamed into the room, they are normally automatically updated
each step and drawn based on the parameters that you have used to
define them. However it can sometimes be necessary to control when
and how the system is updated as well as how the system should be
drawn, and for that <i>GameMaker Studio 2</i> provides the
following functions:</p>

<ul>
<li><a href=
"particle%20systems/part_system_automatic_update.html">part_system_automatic_update<br>
</a>
</li>

<li><a href=
"particle%20systems/part_system_automatic_draw.html">part_system_automatic_draw<br>
</a>
</li>

<li><a href=
"particle%20systems/part_system_update.html">part_system_update<br></a>
</li>

<li><a href=
"particle%20systems/part_system_drawit.html">part_system_drawit<br></a>
</li>

<li><a href=
"particle%20systems/part_system_draw_order.html">part_system_draw_order<br>
</a>
</li>
</ul>
</div>
<br>
<label class="collapse" for="seven">Creating Particles
Directly</label> <input id="seven" type="checkbox">
<div class="index_list">
<p>Normally you would use <a href=
"particle%20emitters/index.html">particle emitters</a> to burst or
stream particles from an area, but in many cases these are not
necessary and it is actually better to just create the particles
directly using the following functions:</p>

<ul>
<li><a href=
"particle%20systems/part_particles_create.html">part_particles_create<br>
</a>
</li>

<li><a href=
"particle%20systems/part_particles_create_colour.html">part_particles_create_colour<br>
</a>
</li>
</ul>
</div></blockquote>
</div>
<br>
<a name="particle_types" id="particle_types"></a> <label class=
"collapse" for="three">Particle Types</label> <input id="three"
type="checkbox">
<div class="index_list">
<p>Particles are the graphic effects that can be created by the use
of particle systems in a game. The particles that you define using
these functions can be used in any system that you create and the
normal procedure would be to define all your particles once at the
start of a game and store their index values in global variables.
These global variables can then be used to burst, emit or create
particles at any time throughout the game. You can also create, use
and then destroy particles as needed if memory is an issue or if
you wish many different types but only at specific points in your
game. Whatever you choose, particles are a very versatile
resource!</p>

<p>Particles need to be created and have their index stored in a
variable so that all further particle routines can access them
correctly. The following functions are used to create, check for,
clear and destroy particle types:</p>

<ul>
<li><a href=
"particle%20types/part_type_exists.html">part_type_exists<br></a>
</li>

<li><a href=
"particle%20types/part_type_create.html">part_type_create<br></a>
</li>

<li><a href=
"particle%20types/part_type_destroy.html">part_type_destroy<br></a>
</li>

<li><a href=
"particle%20types/part_type_clear.html">part_type_clear<br></a>
</li>
</ul>

<p>Once you have created your particle type you should give it a
<i>shape</i>. This can be one of the 14 built in shapes which are
64x64 pixel sprites with alpha blending, or you can use your own
sprites which can be animated, static or use random sub-images. The
following functions define the visual base shape of each
particle:</p>

<ul>
<li><a href=
"particle%20types/part_type_shape.html">part_type_shape<br></a>
</li>

<li><a href=
"particle%20types/part_type_sprite.html">part_type_sprite<br></a>
</li>
</ul>

<p>The following image shows the 14 built in particle types that
you can choose from:  <img class="center" src=
"particle%20types/images/particle_sprites.png"></p>

<p>Once you have chosen the sprite for the particle type (either a
default shape or your own) you can indicate the size and scale of
it. The size can be specified as a range and all particles will be
created with a size chosen from within the given range. The scale
is the "base" value for the x and y axis scale of the particle
<i>before</i> any size variations are added and the following
functions are used to control these values:</p>

<ul>
<li><a href=
"particle%20types/part_type_size.html">part_type_size<br></a>
</li>

<li><a href=
"particle%20types/part_type_scale.html">part_type_scale<br></a>
</li>
</ul>

<p>Particles can also have an orientation and motion. As with most
particle functions, the speed, direction and orientation are
resolved as a random value that is selected from a given range and
can be set with the following functions:</p>

<ul>
<li><a href=
"particle%20types/part_type_speed.html">part_type_speed<br></a>
</li>

<li><a href=
"particle%20types/part_type_direction.html">part_type_direction<br></a>
</li>

<li><a href=
"particle%20types/part_type_gravity.html">part_type_gravity<br></a>
</li>

<li><a href=
"particle%20types/part_type_orientation.html">part_type_orientation<br>
</a>
</li>
</ul>

<p>Once you have the style and movement of your particles sorted
out, you can then set their colour and alpha values, both of which
can be set as an absolute value during the whole lifespan of the
particle, or as a scale of values that go from one to the other
gradually. Note that there is also a special function that permits
you to set the blending for particles and their surroundings, and
this can be either normal or additive and gives some fantastic
effects- The functions governing colour, alpha and blending
are:</p>

<ul>
<li><a href=
"particle%20types/part_type_colour_mix.html">part_type_colour_mix<br>
</a>
</li>

<li><a href=
"particle%20types/part_type_colour_rgb.html">part_type_colour_rgb<br>
</a>
</li>

<li><a href=
"particle%20types/part_type_colour_hsv.html">part_type_colour_hsv<br>
</a>
</li>

<li><a href=
"particle%20types/part_type_colour1.html">part_type_colour1<br></a>
</li>

<li><a href=
"particle%20types/part_type_colour2.html">part_type_colour2<br></a>
</li>

<li><a href=
"particle%20types/part_type_colour3.html">part_type_colour3<br></a>
</li>

<li><a href=
"particle%20types/part_type_alpha1.html">part_type_alpha1<br></a>
</li>

<li><a href=
"particle%20types/part_type_alpha2.html">part_type_alpha2<br></a>
</li>

<li><a href=
"particle%20types/part_type_alpha3.html">part_type_alpha3<br></a>
</li>

<li><a href=
"particle%20types/part_type_blend.html">part_type_blend<br></a>
</li>
</ul>

<p>Particles exist on-screen for a limited amount of time and this
is called their "lifetime". Particle lifetimes are measured in
steps and (like previous functions) this is expressed as a range of
values from which the particle will be given a specific lifetime.
There are also a couple of interesting functions which can be used
to make particles generate <i>other</i> particles, either each step
or when they "die" (ie: Are removed from the screen), but be very
careful with these functions as they can quickly create thousands
of particles and crash the game! The functions that set lifetime
and step or death emitting are as follows:</p>

<ul>
<li><a href=
"particle%20types/part_type_life.html">part_type_life<br></a>
</li>

<li><a href=
"particle%20types/part_type_step.html">part_type_step<br></a>
</li>

<li><a href=
"particle%20types/part_type_death.html">part_type_death<br></a>
</li>
</ul>

<p>It is worth noting that creating particles through code can
often be a laborious and time-consuming process due to the large
number of parameters that can be changed and tweaked. For that
reason it is recommended that you search around and get a hold of
some type of <b>Particle Designer</b> (or make one yourself!) to
take the drudgery out of particle creation.</p>
</div>
<br>
<a name="particle_emitters" id="particle_emitters"></a>
<label class="collapse" for="four">粒子发射器</label>
<input id="four" type="checkbox">
<div class="index_list">
<p>Emitters are used by <i>GameMaker Studio 2</i> to emit particles
over an area of the screen which can have different forms and
distributions. They can also either create a continuous stream of
particles or they can burst out a number of particles all at once,
depending on the way the functions are used.</p>

<p>Since a particle emitter is a dynamically created resource, you
must create it and store the returned index in a variable to
reference the emitter in all further function calls, and it is very
important that you also destroy the emitter when it is no longer
needed or else you will have a memory leak that will slow down and
eventually crash your game. It is also worth noting that particle
emitters will live on forever after they are created, even if the
index is no longer stored. So even if you change room or restart
the game, the systems and the particles will remain, and be
visible, in all further rooms so you better make sure you destroy
them once you no longer need them.</p>

<p>The following functions are available to set the emitters and to
let them create particles. Note that each of them gets the index of
the particle system to which it belongs as a first argument.</p>

<ul>
<li><a href=
"particle%20emitters/part_emitter_exists.html">part_emitter_exists<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_create.html">part_emitter_create<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_clear.html">part_emitter_clear<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_region.html">part_emitter_region<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_burst.html">part_emitter_burst<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_stream.html">part_emitter_stream<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_destroy.html">part_emitter_destroy<br>
</a>
</li>

<li><a href=
"particle%20emitters/part_emitter_destroy_all.html">part_emitter_destroy_all<br>
</a>
</li>
</ul>
</div></blockquote>

<p><br>
</p>

<div class="clear">
<div style="float:left">上一页:  <a href=
"../index.html">Drawing</a></div>

<div style="float:right">下一页: <a href=
"../textures/index.html">Textures</a></div>
</div>

<h5>© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
