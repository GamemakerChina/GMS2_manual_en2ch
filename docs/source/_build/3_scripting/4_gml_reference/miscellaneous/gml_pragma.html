<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, c" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>gml_pragma</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../../../../files/helpindex.css"
type="text/css">
<link rel="stylesheet" href="../../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/4_gml_reference/miscellaneous/gml_pragma.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fmiscellaneous%2Fgml_pragma.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fmiscellaneous%2Fgml_pragma.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script><!-- !chm2web! -->


<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>gml_pragma</h2>

<div class="body-scroll">
<p><br>
</p>

<h3>描述</h3>

<blockquote>
<p>The <tt>gml_pragma</tt> function affects how the given target
compiles your code and should be called with the different commands
to further optimise the final compilation of your project. These
commands are effectively <i>pre-processed</i> before the game is
compiled and so the function can be placed anywhere in your project
and it will still be processed before the game is fully compiled.
The available commands are as follows:</p>

<ul>
<li>"<b>forceinline</b>" - When the function is called with the
"forceinline" pragma in a <b>script resource</b>, the YYC will
compile the project with the script inline, rather than referenced.
This will give a further processing boost, but care must be taken
when using it as it will also inflate the final executable file
size, especially if the in-lined code is large and/or used in
multiple different places, as well as greatly increase the compile
time. Note that this pragma is <b>only valid when building using
the YYC</b>.</li>

<li style="list-style: none"><br>
<br>
</li>

<li>"<b>global</b>", "<b>[gml code]</b>" - The "global" pragma permits you to call some GML code formatted as a string, at a <b>global</b> scope, at compile time, before the first room of the game executes. 比如：

<p class="code">gml_pragma("global", "scr_Init()");</p>
<br>

This will call the script "scr_Init" before the first room of the
game is run. Note that the GML supplied as the second argument
<b>must be a compile time constant</b>, and also note that you
cannot use this pragma to create instances or perform any
operations that require a room (or anything in a room) to
function.</li>

<li style="list-style: none"><br>
<br>
</li>

<li>"<b>PNGCrush</b>" - The "PNGCrush" pragma will use the <a href=
"https://pmt.sourceforge.io/pngcrush/" target="_blank">PNGCrush</a>
program on each texture created. Note that this can add
significantly to the time that it takes to compile the game, so you
don't want it on all the time, although it can make significant
savings on final file size.</li>

<li style="list-style: none"><br>
<br>
</li>

<li>"<b>Texgroup.Scale</b>", "<b>[TextureGroupName]</b>",
"<b>[Scale Divisor]</b>" - The "Texgroup.Scale" will scale the
given texture group on compile. You need to give an additional two
arguments here: the "[TexGroupName]", which is the name (a string)
of the texture group to scale, and the "[Scale Divisor]" (also a
string), which is the divisor you wish to use for the scaling, i.e:



<p class="code">gml_pragma("Texgroup.Scale", "level1", "2");</p>
<br>

This will half all the textures in the "level1" texture group.</li>

<li style="list-style: none"><br>
<br>
</li>

<li>"<b>UnityBuild</b>", "<b>[enable/disable]</b>" - If you call
the function with this pragma and set the enable/disable argument
to <tt>true</tt> then on compile it will collapse all the .cpp
files in the project into a single file which it then uses to build
everything, for example:



<p class="code">gml_pragma("UnityBuild", "true");</p>
<br>

The benefit of doing a unity build is that builds are faster but
the down side is that it does a <i>full</i> build each time so even
if you change a single part of the code it will build everything
again without using any cached files. This has been added
specifically for the Xbox One export using the YYC although it can
be called for other builds (<b>YYC only</b>). For more information
on unity builds, please see <a href=
"http://buffered.io/posts/the-magic-of-unity-builds/" target=
"_blank">here</a>.</li>
</ul>

<div class="note"><b>NOTE</b>: The first argument to the
<tt>gml_pragma</tt> function <b>must be a compile time string
constant</b> and not a variable.</div>
</blockquote>

<p><br>
</p>

<h3>语法：</h3>

<p class="code">gml_pragma(command, [optional...]);</p>

<div class="param">
<table>
<tr>
<th>参数</th>
<th>描述</th>
</tr>

<tr>
<td>command</td>
<td>A string with one of the commands listed below.</td>
</tr>

<tr class="alt">
<td>[optional]</td>
<td>Some of the available commands require an optional argument or
arguments. These are explained below for each command.</td>
</tr>
</table>
</div>

<p><br>
</p>

<h3>Returns:</h3>

<p class="code">N/A（无返回值）</p>

<p><br>
</p>

<h3>例如：</h3>

<p class="code">gml_pragma("forceinline");<br></p>

<blockquote>
<p>The above example code will force the script where it is used to
be in-lined on compile.</p>
</blockquote>

<p><br>
</p>
</div>

<div class="footer">
<div class="buttons">
<div class="clear">
<div style="float:left">上一页:  <a href=
"index.html">Miscellaneous</a></div>

<div style="float:right">下一页: <a href=
"parameter_count.html">parameter_count</a></div>
</div>
</div>

<h5>© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
