<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>调试</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">

<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/2_interface/2_tools/debugging.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F_build%2F2_interface%2F2_tools%2Fdebugging.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F_build%2F2_interface%2F2_tools%2Fdebugging.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script><!-- !chm2web! -->


<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>调试</h2>

<div class="body-scroll">
<p>The <b>Debugger</b> is a powerful tool for checking your game,
and is especially useful for tracking down errors and bugs in your
code, as well as checking that scripts are run when they should be,
and that variables and arrays contain the values you expect etc...
You can start the Debugger by running your game from <i>GameMaker
Studio 2</i> IDE using the <b>Debug</b> button <img style=
"vertical-align:middle" src="images/icon_debug.png"> at the top of
the IDE, or by going to the <a href=
"../../1_overview/2_quick_start/menus/build_menu.html">Build
menu</a> and selecting "Debug".</p>

<div class="note"><b>NOTE:</b> You may be prompted by Windows
Firewall (or any other firewall program that you run) to create a
security exception for this module. <b>You must do this</b>
otherwise it will not work correctly. This is due to the way the
Debugger works and is essential for debugging mobile
platforms.</div>

<p>The actual Debugger window will look something like this:

<img class="center" src="images/debug_module.png" alt=
"Debugger"></p>

<p>At the top you have four drop down menus:</p>

<ul>
<li><b>File:</b> Here you can attempt to <i>reconnect</i> the debug
module to your game should the connection be lost, or exit the
debug module (which will not exit your game, only the module).</li>

<li style="list-style: none"><br>
</li>

<li><b>Window:</b> This menu contains options for the various
sub-windows that you can create for debugging. You can delete them
(clear all of them so that you can create a new watch layout), or
save the current layout or load a previously saved layout.</li>

<li style="list-style: none"><br>
</li>

<li><b>Debug:</b> From here you can pause or play the game being
debugged, or you can toggle a breakpoint on or off.</li>

<li style="list-style: none"><br>
</li>

<li><b>Help:</b> Opens up your browser, taking you to this page in
the manual.</li>
</ul>

<p>Apart from these drop down menus, you also have a series of
buttons along the top with which you can control certain aspects of
your game and the Debug Modules interaction with it. These buttons
are:</p>

<table class="icons">
<tr>
<td class="icons"><img align="middle" src="images/debug_play.png"
alt="Debug Play">
</td>
<td class="text">This starts the game again after it has been
paused (keyboard shortcut <tt>f5</tt>).</td>
</tr>

<tr>
<td>
</td>
</tr>

<tr>
<td class="icons"><img align="middle" src="images/debug_pause.png"
alt="Debug Pause">
</td>
<td class="text">This will pause the game, if playing (keyboard
shortcut <img style="vertical-align:middle" src=
"../../images/icon_escape.png">).</td>
</tr>

<tr>
<td>
</td>
</tr>

<tr>
<td class="icons"><img align="middle" src=
"images/debug_restart.png" alt="Debug Restart">
</td>
<td class="text">Restarts the game.</td>
</tr>

<tr>
<td>
</td>
</tr>

<tr>
<td class="icons"><img align="middle" src="images/debug_stepin.png"
alt="Debug Step In">
</td>
<td class="text">Step into a code block or script (keyboard
shortcut <tt>f11</tt>).</td>
</tr>

<tr>
<td>
</td>
</tr>

<tr>
<td class="icons"><img align="middle" src=
"images/debug_stepover.png" alt="Debug Step Over">
</td>
<td class="text">Step over a code block or script (keyboard
shortcut <tt>f10</tt>).</td>
</tr>

<tr>
<td>
</td>
</tr>

<tr>
<td class="icons"><img align="middle" src=
"images/debug_stepout.png" alt="Debug Step Out">
</td>
<td class="text">Step out of a code block or script (keyboard
shortcut <img style="vertical-align:middle" src=
"../../images/icon_shift.png"> + <tt>f11</tt>).</td>
</tr>

<tr>
<td>
</td>
</tr>

<tr>
<td class="icons"><img align="middle" src=
"images/debug_realtime.png" alt="Debug Real Time">
</td>
<td class="text">Turn on or off real time updates for the debug
information (this is off by default).</td>
</tr>
</table>

<p>The first three buttons are used to control your game,
permitting you to start, pause or restart it at any time. When the
game is paused, you can then use the next three buttons for
"stepping" through your code. This simply means that you can tell
your game to run the current line of code, then step onto the next
one, permitting you to run through your entire game one line of
code at a time should you wish. Normally you would simply use the
<i>Step In</i> button to do this, but you also have one for
stepping over code and one for stepping out of the code. Stepping
over is useful when you have large scripts to run through, as
clicking this will run the whole script or code block as a single
step and stop on the next line afterwards, while stepping out will
take you out of a script (they will run, but all at once) and stop
on the next step afterwards when the scope changes. The final icon
permits the debug window to update its data in real time, so you
can see how variables change or instances are created and destroyed
as it happens. Note that this may affect the games performance and
that not all information is available in real time. For example,
the <b>Render State</b> watch (see the section on Watches, below)
cannot be viewed in real time.</p>

<p><br>
</p>

<h2>Watches</h2>

<p>The whole idea of the Debugger is to permit you to "watch" every
detail of your game. This is done using "watch windows" which are
opened in the main space on the right hand side of the debug
module. To open a new watch, simply click on an empty area (which
will show the text <i>Select window type</i> if no watch is
selected) or right-click <img style="vertical-align:middle" src=
"../../images/icon_rmb.png"> on the top window bar and choose a new
<i>Type</i>.</p>

<div class="note"><b>NOTE:</b> Many of the watch windows (like
Global, Local or Watches) will <b>not</b> update while the game is
running, and will require that you pause the game or set a
breakpoint before they are updated.</div>

<p>You can also split the main watch area into multiple windows
using the "Split" option from the top window bar, permitting you to
organise the layout to suit your needs (and these layouts can also
be saved through the "Window" drop down menu). The type of window
that you choose to open will depend on what it is that you wish to
watch, with the following options available:</p>

<blockquote><label class="collapse" for="one">Source</label>
<input id="one" type="checkbox">
<div class="index_list">
<p>The <b>Source</b> window is where you can see the source code
for your game, and you can have multiple tabs open in this window,
with each tab showing the code from a different instance or event
or script. If you do a right click <img style=
"vertical-align:middle" src="../../images/icon_rmb.png"> beside a
line of code you can add a <b>Breakpoint</b> to the code (see below
for more details on Breakpoints), and doing so again will remove it
(you can also use the keyboard shortcut <tt>f9</tt>, or the toggle
option from the <i>Debug</i> drop down menu. If you have this
window open, you can also double click <img style=
"vertical-align:middle" src="../../images/icon_lmb.png"> on an
event in any instance from the resource tree and its code will be
shown in a new tab.</p>
</div>
<br>
<label class="collapse" for="two">Locals</label> <input id="two"
type="checkbox">
<div class="index_list">
<p>The <b>Locals</b> window shows the current step properties,
which includes the name of the current event (or script) being run,
the position within the event (the acronym "PC" is for "program
counter"), the "self" instance running the code block, and the
"other" instance in the event. This last part is only ever valid
when the event is a collision event or there is a <tt>with</tt>
used in the code. If the instance is in collision, "other" will
show the other instance (and it's variables) in the collision, but
if it is a <tt>with</tt> then the "Self" instance becomes that
which is running the code, while "Other" is then the instance that
actually contains the <tt>with</tt>. At all other times, "other"
will simply show the same data as "Self". After all this
information, you will then find a list of all <i>local</i>
variables that are currently declared for the code block being
stepped through. If you right click <img style=
"vertical-align:middle" src="../../images/icon_rmb.png"> on a value
you can set its type (see <b>Data Types</b>, below) to see details
of data structures.</p>
</div>
<br>
<label class="collapse" for="three">Globals</label> <input id=
"three" type="checkbox">
<div class="index_list">
<p>The <b>Globals</b> window will show a list of all the currently
declared global variables and their values. If you right click
<img style="vertical-align:middle" src="../../images/icon_rmb.png">
on a value you can set its type (see <b>Data Types</b>, below) to
see details of data structures.</p>
</div>
<br>
<label class="collapse" for="four">Watches</label> <input id="four"
type="checkbox">
<div class="index_list">
<p>This window is for you to add a specific variable that you want
to keep track of. This can be a global or instance scope variable,
a built in variable or even an array or data structure. If the the
instance code being stepped through has the watched variable it
will be shown here, meaning you can easily keep track of a value
without having to search for it in the Locals or Globals windows.
If you right click <img style="vertical-align:middle" src=
"../../images/icon_rmb.png"> on a value you can set its type (see
<b>Data Types</b>, below), delete it, or clear <i>all</i> watches
from the window. You can also change some of the values for the
variables shown by simply double clicking <img style=
"vertical-align:middle" src="../../images/icon_lmb.png"> on the
value and giving it a new one. Note that you cannot re-assign
arrays or data structures in this way, but you <i>can</i> change
some of their contents (you cannot change the "key" values in maps,
nor the priority value for priority queues).</p>
</div>
<br>
<label class="collapse" for="five">Instance</label> <input id=
"five" type="checkbox">
<div class="index_list">
<p>As the name implies, this window will show all instance
variables, local variables and built in variables associated with
the instance currently being stepped through in the Source window
(if an instance is being referenced using the keyword "other" or
the <tt>with</tt> statement, then this window will show that
instances properties instead).</p>
</div>
<br>
<label class="collapse" for="six">输出</label> <input id="six"
type="checkbox">
<div class="index_list">
<p>This window simply shows the output of the compiler (as shown in
the main IDE compiler window). If you right click <img style=
"vertical-align:middle" src="../../images/icon_rmb.png"> on the
window you can clear it or copy its contents to the clipboard.</p>
</div>
<br>
<label class="collapse" for="seven">All Instances</label>
<input id="seven" type="checkbox">
<div class="index_list">
<p>Should you need to see all instances that are currently in the
room, you can select this window and they will be listed. You can
also see the state of any built in or instance variables that they
have, and you can right click <img style="vertical-align:middle"
src="../../images/icon_rmb.png"> on a value to set its type (see
<b>Data Types</b>, below)</p>
</div>
<br>
<label class="collapse" for="eight">Selected Instance</label>
<input id="eight" type="checkbox">
<div class="index_list">
<p>This window is for when you select an instance from your game.
This is done by simply pausing the game and then clicking on any
visible instance within the game window. The instance found beneath
the mouse cursor will then have its information displayed in the
Selected Instance window, where you can see it's built in and
instance variables, the same as for the Instances window.</p>
</div>
<br>
<label class="collapse" for="nine">Call Stack</label> <input id=
"nine" type="checkbox">
<div class="index_list">
<p>This window will display the current call stack of events, as
well as the line number for the code being stepped through.</p>
</div>
<br>
<label class="collapse" for="ten">缓冲区</label> <input id="ten"
type="checkbox">
<div class="index_list">
<p>If you have initialised any buffers in your game, then this
window will show you the buffer data. You can select any buffer
created by setting the <i>Buffer ID</i> value, which will start at
0 for the first buffer created in your game, and increment by 1 for
each consecutive buffer.  <img class="center" src=
"images/debug_buffer.png" alt="Debug Buffer"></p>

<p>If you right click <img style="vertical-align:middle" src=
"../../images/icon_rmb.png"> on the data window, you can select how
the data is displayed, setting the alignment and type, and you can
also set how the data is laid out from the <i>Columns</i> box.
There is a drop-down window here where you can select from a
default list of layouts, or you can click the box and input your
own value. Note that for large buffers, scrolling down through the
data will require that you scroll, <i>then</i> release the mouse
button for the Debugger to fetch and display the required data.</p>
</div>
<br>
<label class="collapse" for="eleven">Profile</label> <input id=
"eleven" type="checkbox">
<div class="index_list">
<p>This window is where you can see the current system profile for
the game being tested where you can check everything in your game
from whole events to individual function calls to see how they are
performing and spot any trouble areas or bottlenecks. For further
information on profiling see the section below on this page.</p>
</div>
<br>
<label class="collapse" for="twelve">Graph</label> <input id=
"twelve" type="checkbox">
<div class="index_list">
<p>The <b>Graph</b> window shows you a graphic display of how your
game is performing. You can see the memory use, or how the GML is
performing on the CPU, or a combination of both. You can change
views easily by clicking <img style="vertical-align:middle" src=
"../../images/icon_lmb.png"> on the drop-down tab on the right and
selecting the option you require: <img class="center" src=
"images/debug_graph.png" alt="Debug Graph"></p>
</div>
<br>
<label class="collapse" for="thirteen">Render States</label>
<input id="thirteen" type="checkbox">
<div class="index_list">
<p>This watch shows you all the information available for the state
of the current frame being rendered, like the draw alpha or fill
colour. This cannot be updated in real time so you will need to
pause the game to get and update the frame details.</p>
</div>
<br>
<label class="collapse" for="fourteen">Surfaces / Textures</label>
<input id="fourteen" type="checkbox">
<div class="index_list">
<p>This watch enables you to see exactly what is being drawn to any
surfaces you have in your game (including the <tt>application
surface</tt>) as well as see the texture pages that are in memory.
You can select from textures or surfaces from the top of the watch,
and then select the texture or surface ID to have it displayed in
the window.  <img class="center" src="images/debug_textures.png"
alt="Debug Textures"></p>
</div></blockquote>

<p>It is important to note that while the game is running it
<i>doesn't update the debug windows with variable values and other
details by default</i>, therefore you must first either use the
<b>Pause</b> button <img align="middle" src=
"images/debug_pause.png"> in the Debugger to pause the game before
Locals, Globals and other data will be available, or enable
real-time updating from the icons at the top <img align="middle"
src="images/debug_realtime.png">. The only exception to this rule
is the <i>Profile</i> view, which updates in real time when enabled
independently of the real-time switch, as it has its own on/off
button.</p>

<p><br>
</p>

<h2>数据类型</h2>

<p>When you are watching a variable in any of the windows, it can
be one of multiple <b>data-types</b>. However, due to the way that
<i>GameMaker Studio 2</i> stores certain things, the Debugger does
not always know exactly what the variable holds. This is because
the internal ID values for data structures or instances are
integers and so the Debugger doesn't always know if the integer
value being stored in a variable is for a data structure or an
instance or is simply an integer value. For that reason, you can
right click <img style="vertical-align:middle" src=
"../../images/icon_rmb.png"> on any variable value and get a pop-up
window that lists the available data-types that this variable could
be. Strings and arrays do not permit this option, and it is worth
noting that even if a data structure is stored in an instance
variable, its ID number is <b>global</b>, so if you have four
instances and each one creates a ds_list (for example), each list
will have an id from 0 to 3, and they won't all be 0.</p>

<p>Once you have selected your data-type, the variable will then
show the entries in the structure simply by clicking the small "+"
next to its name. This will expand the structures contents, and, in
the case of the "Watches" window, permit you to modify them
too.</p>

<p><br>
</p>

<h2>断点</h2>

<p>A breakpoint is a place in your game code that you wish it to
stop at so you can see what's going on. With the Debugger, you can
set these at any time and in any code block, and you can also set
them from the <i>GameMaker Studio 2</i> IDE. When making your game,
they can be added at any time using <tt>f9</tt> (or using the right
mouse button <img style="vertical-align:middle" src=
"../../images/icon_rmb.png"> and selecting "toggle breakpoint"),
either on an action in the object window, or on a line in a code
editor window. Now, when you run your game in debug mode it will
pause at the point (or points) that you have defined. Breakpoints
can be set from the IDE (again using <tt>f9</tt>) and are saved
along with your game and persist over various runs, however if you
add a breakpoint to your code in the Debugger, this will be lost
after the module is closed, or a new test run started. Note that
all breakpoints will appear in the <a href="output.html">Output
Window</a> where they can be enabled or disabled or even
removed.</p>

<p><br>
</p>

<h2>Profiling</h2>

<p>The Debugger permits you to step through your code and find any
issues with the code base, but sometimes you need to check for
subtler details in order to properly optimise your games. The
<b>Profile</b> option helps to do just that by giving you a
performance overview, showing the time takes to call functions,
scripts, and even how long it took a specific event to complete.

<img class="center" src="images/debug_profile.png" alt=
"Debug Profile Window"></p>

<p>As you can see form the image above, you set the Profile as a
window in the Debugger, and it has a button for enabling/disabling
profiling, the number of steps that have been profiled, as well as
two sections which you can use to display the information in
different ways.  <img class="center" src=
"images/debug_profile_options.png" alt="Debug Profile Options"></p>

<p>Clicking <img style="vertical-align:middle" src=
"../../images/icon_lmb.png"> on the enable/disable button will
switch profiling on or off for the game being debugged, while the
value next to it shows the total number of steps that have been
profiled. Beside that you can also see either the total time taken
for the profile, <i>or</i> the average time taken per step. Which
value you view will depend on the button for selecting the format
<img style="vertical-align:middle" src=
"images/debug_timeformat.png"> , which also changes the way that
the <i>Time</i> and <i>Calls</i> data is displayed, with "Total"
being the total number of calls made to the function, script or
event and the total time taken (times are in <i>microseconds</i>)
over the course of the profile. Setting this to <i>Average</i> will
make these columns show the average time taken per step for each
function, script or event, and the average number of times that it
was called. You can also click the <i>Run Game At Maximum Room
Speed</i> button <img style="vertical-align:middle" src=
"images/debug_runmaxspeed.png"> to force the debugger to remove the
room speed clamp and try to run the game at the real FPS.<br>
<br>
The other two options are for controlling what exactly you are
profiling and the data that is shown. The first option is for
selecting how to view the data, and you can choose from the
following:</p>

<blockquote>
<ul>
<li><b>Tree</b> - This will show the profile from the top down
(more or less the same as the callstack hierarchy) so it will show
the event, then the script and then any functions used. Note that
you can double click <img style="vertical-align:middle" src=
"../../images/icon_lmb.png"> on any of the entries to have it open
in the <b>Source</b> debug window if you have one. If you see a (+)
icon beside a name then there are further script or function calls
within that section, and clicking the (+) will expand the tree to
show them.<br>
<br></li>

<li><b>Bottom Up</b> - Contrary to the tree view, showing things
from the bottom up will show all the functions and scripts
individually, and clicking on the (+) will expand to show what
actually called them.</li>
</ul>
</blockquote>

<p>The second option is for selecting what data is shown, whether
it should be the event and code data, the engine data, or both. If
you choose "GML", then you will get the events, functions and codes
being called each step while the "Engine" view will only show the
engine calls required by the game, enabling you to see any
bottlenecks in the way that your game is handling things. If you
select both, then both sets of data will be displayed, and the
"Engine" data will be coloured differently to help you
differentiate it from the functions.</p>

<p>The profile data is shown in four columns, and clicking on any
of them will sort the data according to the column criteria.

<img class="center" src="images/debug_profile_data.png"></p>

<ul>
<li><b>Name</b> - This is the name of the event, script or function
being called, and may have a (+) beside it to denote further calls
to it or from it (depending on the view you have selected). You can
double click <img style="vertical-align:middle" src=
"../../images/icon_lmb.png"> on any of the names to have it open
the code block or script within the <b>Source</b> window, assuming
you have one open. Clicking the top of this column will sort the
names in alphabetical order.<br>
<br></li>

<li><b>Time</b> - This will show either the total time that a
function (or script or event) has taken while profiling, or the
average time that it has taken each step to be called (depending on
the view option selected) and it is displayed in
<b>microseconds</b>.<br>
<br></li>

<li><b>Calls</b> - Here you can see either the total number of
calls to the given event, function or script, or the average number
of calls to it in a single step (again, depending on the view
options selected).<br>
<br></li>

<li>Step% - The value shown here is the overall percentage of a
single step that the call has taken.</li>
</ul>

<p>You can export the profile data at any time by right clicking
<img style="vertical-align:middle" src="../../images/icon_rmb.png">
on the window and selecting the <i>Export to file</i> option. This
will write the current view (after expanding all the nodes) in
<tt>.csv</tt> format, which you can then load into any spreadsheet,
like Excel for example.</p>

<p><br>
</p>
</div>

<div class="footer">
<div class="buttons">
<div class="clear">
<div style="float:left">Back: <a href="index.html">Tools
Index</a></div>

<div style="float:right">Next: <a href="source_control.html">Source
Control</a></div>
</div>
</div>

<h5>© Copyright YoYo Games Ltd. 2016 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
