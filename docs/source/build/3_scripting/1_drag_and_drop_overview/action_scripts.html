<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>创建动作脚本</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">

<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/1_drag_and_drop_overview/action_scripts.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F1_drag_and_drop_overview%2Faction_scripts.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F1_drag_and_drop_overview%2Faction_scripts.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script><!-- !chm2web! -->


<script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script>
<h2>创建动作脚本</h2>

<div class="body-scroll">
<p><br>
</p>

<p><b>资源树</b>中有一种资源叫做<b>脚本（Script）</b>脚本就是一段代码或者拖拽按钮（DnD™）动作，它们可以像<i>GameMaker Studio 2</i>的内置函数或动作那样被执行。We have a whole section of the manual about writing scripts using code (<a href=
"../../2_interface/1_editors/scripts.html">here</a>), but you can also make scripts using only the Drag and Drop actions.</p>

<p>A DnD™ script (like any built-in DnD™ action) can take different
values (or none at all), and then perform a chain of actions and
either return a value or return nothing, and you would call it
using the <a href=
"../2_drag_and_drop_reference/common_actions/execute_script.html">Execute
Script</a> <img style="vertical-align:middle" src=
"../2_drag_and_drop_reference/common_actions/images/i_common_execute_script.png">
 action, which looks like this: <img class="center" src=
"../2_drag_and_drop_reference/common_actions/images/a_common_execute_script.png"
alt="Execute Script Syntax"> The input variables are called
arguments, and you can supply up to 4 of them using this action
(although you can use all, some or none of them, depending on what
you require for the script), but you can also use the <a href=
"../2_drag_and_drop_reference/common_actions/execute_code.html">Execute
Code</a> <img style="vertical-align:middle" src=
"../2_drag_and_drop_reference/common_actions/images/i_common_execute_code.png">
 to call the script, in which case your script can have either up
to 16 arguments (when using the <tt>argument0 ... argument15</tt>
variables) or as many arguments as required (when using the
<tt>argument[n]</tt> array): <img class="center" src=
"images/executecode_example.png" alt=
"使用代码执行动作脚本"></p>

<p>欲创建DnD™脚本，你只需要在脚本资源上右键<img style="vertical-align:middle" src="../../images/icon_rmb.png">并选择<i>创建（Create）</i>就会创建一个新的DnD™脚本并打开编辑器窗口：</p>

<p>You can name the script by right clicking <img style=
"vertical-align:middle" src="../../images/icon_rmb.png"> on it in
the resource tree and selecting <i>Rename</i> (or by using a slow
double left click <img style="vertical-align:middle" src=
"../../images/icon_lmb.png">), but note that the script name
<i>must</i> conform to the scripting rules for functions, so they
must start with a letter and only contain letters, numbers or the
"_" under-bar symbol.</p>

<p>如前所述，你可以向一个脚本传递（Pass）一些参数，然后它就会用这些参数来执行你为它所编写的任务。为了更好的理解这件事，举个例子，就拿一个动作然后考虑它是如何工作的……你把它放到事件当中，然后指定了一些参数，然后它就会让你的实例做某些事情。脚本也是如此，唯一的区别就是它们是由<i>你</i>所编写的。下图展示了一个简单的DnD™脚本取得了一个参数，然后使用这个参数在房间内随机位置创建一些实例： <img class="center"
src="images/script_example.png" alt="D&amp;D脚本样例"></p>

<p>请注意，在开始的时候我们将值<tt><b>argument0</b></tt>赋给一个临时变量（Temporay Variable）所有值都被传入脚本，并且被赋给了如下的<b>内置</b>变量：</p>

<p class="code">argument0, argument1, ..., etc... up to
argument15</p>

<p>你可以直接访问这些内置的argument变量，或者将其赋给临时（局部）变量就像我们在上面范例中所做的那样（使用临时变量会使跟踪每一个参数的行为更加容易，并且这是推荐的做法）。在上面的脚本中，<tt>argument0</tt>的值会被用于决定<tt>重复型</tt>循环（repeat）的运行次数，并且你可以像这样调用（Call）脚本： <img class="center" src=
"images/script_call.png" alt="调用D&amp;D脚本"></p>

<p>你不仅可以向脚本传递参数，你还可以要求脚本返回（Return）一个值（使用<a href=
"../2_drag_and_drop_reference/common_actions/return.html">返回（Return）</a>动作），因此你可以使用它们来（举个例子）构建一些计算方法或经过一系列复杂的碰撞检测之后反馈一个实例ID，又或者是其他的一些东西。然而请注意，<b>使用return将会结束该脚本</b>，并且被放置于其后的动作都不再会被执行，并且这也就意味着，你需要考虑你的脚本是如何构造的。</p>

<p>下面是一个返回了值的拖拽按钮脚本：
<img class="center" src="images/script_example_return.png" alt=
"D&amp;D脚本返回样例"></p>

<p>上述脚本会直接检测房间内所有实例来观察它们的<tt>object_index</tt>是多少并且如果它们当中有一个和玩家相同的时候脚本会返回<tt>true</tt>或<tt>false</tt>（并结束脚本）You would call this script like this: <img class="center" src="images/script_call_return.png" alt=
"调用带有返回值的D&amp;D脚本"> So, we call the script and have it create a temporary (local) variable to store the returned value (which in this case is either <tt>true</tt> or <tt>false</tt>), and then this variable is checked and an action taken.</p>

<p>When making your DnD™ scripts you can use all the same actions
as you would when adding actions into an object event, and you can
even call scripts from within scripts, and in this way create more
"modular" action code. Scripts built in this way can save you a lot
of time creating the same action sequences and can also help make
your action sequences easier to read and easier to debug.</p>

<p><br>
</p>
</div>

<div class="footer">
<div class="buttons">
<div class="clear">
<div style="float:left">上一页：<a href="index.html">拖拽按钮概览</a></div>

<div style="float:right">下一页：<a href="changing_dnd.html">拖拽按钮转换为代码</a></div>
</div>
</div>

<h5>© Copyright YoYo Games Ltd. 2017 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
